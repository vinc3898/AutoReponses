<!DOCTYPE html>
<html>
  <head>
    <link href='https://fonts.googleapis.com/css?family=Nunito' rel='stylesheet'>
    <style>
      body{
        font-family: 'Nunito';
        font-weight: normal;
      }
      h2{
        white-space: nowrap; 
        overflow: hidden;
        text-overflow: ellipsis;
        font-size: 20px;
      }

      #loading{
        width:300px;
        transition:ease;
      }
      .questionblock{
        border-radius: 5px;
        border: 0.5px solid;
        padding: 10px;
        margin: 15px auto;
        box-shadow: 5px 0px 10px #888888;
      }
      .container{
        display:none;
      }
      .numberbox{
        padding: 0 1px;
        border-radius: 5px;
        border: 2px solid cornflowerblue;
        display: flex;
        justify-content: center;
      }
      input::-webkit-outer-spin-button,
      input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      .percentage-field{
        appearance: none;
        width:35px;
        background: transparent;
        border: none;
        text-align: center;
        font-size: 12px;
      }
      input{
        font-family: 'Nunito';
      }
      input.percentage-field:focus{
          outline: none;
      }
      input.text-field{
        font-size: 18px;
        outline: 0;
        border: none;
        border-bottom: 2px solid cornflowerblue;
      }
      input.text-field:focus{
        border-color: blue;
      }
      .add-button{
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background-color: transparent;
        border: none;
        outline: none;
        font-size: 20px;
        height:35px;
        width:35px;
        border-radius: 50%;
      }
      .add-button:hover{
        background-color: rgb(0,0,0,0.1);
      }
      .button-icon{
        display: inline-flex;
        align-items: center;
      }
      .grid-container{
        display: grid;
        grid-template-columns: 70% 30%;
        grid-template-rows: auto;
        row-gap: 5px;
        overflow: hidden;
      }
      .grid-item-left{
        display: flex;
        align-items: flex-end;
        justify-content: flex-start;
        overflow: hidden;
      }
      .grid-item-right{
        display: flex;
        align-items: flex-end;
        justify-content: flex-end;
      }
      .grid-item-center{
        grid-column: 1 / span 2;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .grid-item-row{
        display: contents;
      }
      .overflow{
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
    </style>
  </head>
  <body>
    <img src="https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif?20151024034921" id="loading"></img>
    <div class="container">
      <div id="questions"></div>
      <button type="button" style="margin:10px auto;display:block;" onclick="generateResponses();">Generate Responses</button>
    </div>
    <!-- ionicons start -->
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <!-- ionicons end -->
  </body>
</html>

<script>

document.addEventListener("DOMContentLoaded", function() {
  google.script.run.withSuccessHandler(appendHtml).getQuestions();
});

function appendHtml(html) {
  var questions = document.getElementById("questions");
  var container = document.getElementsByClassName("container")[0];
  var loading = document.getElementById("loading");

  questions.innerHTML = html;
  container.style.display = "block";
  loading.style.display = "none";
}

function addtextInput(button_id){

  const id = button_id.split("_")[1]
  const target = document.getElementById("grid_" + id);
  const first_row = target.children[0];
  const length = target.children.length - 1;

  const new_option = first_row.cloneNode(true);
  const percentage_field = new_option.querySelector('.percentage-field');
  const text = new_option.querySelector('.text-field');

  percentage_field.id = "filed_" + length;
  text.value = "";
  
  console.log(text);
  target.insertBefore(new_option, target.lastChild);
}

function onSuccess(){
  console.log("Success");
}

function generateResponses(){
  
  /*var temp = [];
  var values = [];
  var check_id = 0;
  var length = $(".slider").length;
  $(".slider").each(function(index) {
    var slider = $(this);
    var element_id = parseInt(slider.attr('id'));
    if (element_id - check_id == 1){
      temp.push(slider.val()/100);
      check_id = element_id;
      if(index == length -1){
        values.push(temp);
     }
    }
    else{
      values.push(temp);
      temp = [];
      temp.push(slider.val()/100);
      check_id = element_id;
    }
  });
  console.log(values);*/
  google.script.run.withSuccessHandler(onSuccess).open();
}
</script>

